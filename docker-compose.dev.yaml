version: '3'

services:
  prowlarr:
    image: lscr.io/linuxserver/prowlarr:1.0.0-nightly
    container_name: prowlarr
    hostname: prowlarr
    restart: unless-stopped
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Asia/Shanghai
    volumes:
      - ./config/prowlarr:/config
    labels:
      # auto update image
      # - "com.centurylinklabs.watchtower.enable=true"
      # traefik
      - "traefik.enable=true"
      # svc
      - "traefik.http.services.prowlarr.loadbalancer.server.port=9696"
      # http
      - "traefik.http.routers.prowlarr.entrypoints=web"
      - "traefik.http.routers.prowlarr.rule=Host(`prowlarr.media.local`)"
      - "traefik.http.routers.prowlarr.service=prowlarr"
    ports:
      - 9696
  ombi:
    image: lscr.io/linuxserver/ombi:latest
    container_name: ombi
    hostname: ombi
    restart: unless-stopped
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Asia/Shanghai
    volumes:
      - ./config/ombi:/config
    labels:
      # auto update image
      # - "com.centurylinklabs.watchtower.enable=true"
      # traefik
      - "traefik.enable=true"
      # svc
      - "traefik.http.services.ombi.loadbalancer.server.port=3579"
      # http
      - "traefik.http.routers.ombi.entrypoints=web"
      - "traefik.http.routers.ombi.rule=Host(`ombi.media.local`)"
      - "traefik.http.routers.ombi.service=ombi"
    ports:
      - 3579
  sonarr:
    image: lscr.io/linuxserver/sonarr:latest
    container_name: sonarr
    hostname: sonarr
    restart: unless-stopped
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Asia/Shanghai
    volumes:
      - ./config/sonarr:/config
      - /mnt/media:/data
    labels:
      # auto update image
      # - "com.centurylinklabs.watchtower.enable=true"
      # traefik
      - "traefik.enable=true"
      # svc
      - "traefik.http.services.sonarr.loadbalancer.server.port=8989"
      # http
      - "traefik.http.routers.sonarr.entrypoints=web"
      - "traefik.http.routers.sonarr.rule=Host(`sonarr.media.local`)"
      - "traefik.http.routers.sonarr.service=sonarr"
    ports:
      - 8989
  radarr:
    image: lscr.io/linuxserver/radarr:latest
    container_name: radarr
    hostname: radarr
    restart: unless-stopped
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Asia/Shanghai
    volumes:
      - ./config/radarr:/config
      - /mnt/media:/data
    labels:
      # auto update image
      # - "com.centurylinklabs.watchtower.enable=true"
      # traefik
      - "traefik.enable=true"
      # svc
      - "traefik.http.services.radarr.loadbalancer.server.port=7878"
      # http
      - "traefik.http.routers.radarr.entrypoints=web"
      - "traefik.http.routers.radarr.rule=Host(`radarr.media.local`)"
      - "traefik.http.routers.radarr.service=radarr"
    ports:
      - 7878
  qbittorrent:
    image: superng6/qbittorrent:latest
    container_name: qbittorrent
    hostname: qbittorrent
    restart: unless-stopped
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Asia/Shanghai
    volumes:
      - ./config/qbittorrent:/config
      - /mnt/media:/data
    labels:
      # auto update image
      # - "com.centurylinklabs.watchtower.enable=true"
      # traefik
      - "traefik.enable=true"
      # svc
      - "traefik.http.services.qbittorrent.loadbalancer.server.port=8080"
      # http
      - "traefik.http.routers.qbittorrent.entrypoints=web"
      - "traefik.http.routers.qbittorrent.rule=Host(`qbittorrent.media.local`)"
      - "traefik.http.routers.qbittorrent.service=qbittorrent"
    ports:
      - 8080
      - 6881:6881/tcp
      - 6881:6881/udp
  flaresolverr:
    image: ghcr.io/flaresolverr/flaresolverr:latest
    container_name: flaresolverr
    hostname: flaresolverr
    restart: unless-stopped
    environment:
      - LOG_LEVEL=${LOG_LEVEL:-info}
      - LOG_HTML=${LOG_HTML:-false}
      - CAPTCHA_SOLVER=${CAPTCHA_SOLVER:-none}
      - TEST_URL=http://www.baidu.com
      - TZ=Asia/Shanghai
    labels:
      # auto update image
      # - "com.centurylinklabs.watchtower.enable=true"
      # traefik
      - "traefik.enable=true"
      # svc
      - "traefik.http.services.flaresolverr.loadbalancer.server.port=8191"
      # http
      - "traefik.http.routers.flaresolverr.entrypoints=web"
      - "traefik.http.routers.flaresolverr.rule=Host(`flaresolverr.media.local`)"
      - "traefik.http.routers.flaresolverr.service=flaresolverr"
    ports:
      - 8191
  xarr_rss:
    image: xiaoyi510/xarr-rss
    container_name: xarr_rss
    hostname: xarr_rss
    restart: unless-stopped
    environment:
      - TZ=Asia/Shanghai
    volumes:
      - ./config/xarr_rss:/app/conf
    labels:
      # auto update image
      # - "com.centurylinklabs.watchtower.enable=true"
      # traefik
      - "traefik.enable=true"
      # svc
      - "traefik.http.services.xarr_rss.loadbalancer.server.port=8086"
      # http
      - "traefik.http.routers.xarr_rss.entrypoints=web"
      - "traefik.http.routers.xarr_rss.rule=Host(`xarr_rss.media.local`)"
      - "traefik.http.routers.xarr_rss.service=xarr_rss"
    ports:
      - 8086

networks:
  default:
    name: traefik_bridge
    external: true